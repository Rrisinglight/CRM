import{s as vt,n as bt,d as i,r as _t,x as b,i as be,b as e,u as P,E as gt,l as t,y as yt,g as d,c as a,e as f,m as _,j as c,h as r,k as xt,a as Ct,f as $e,t as et}from"../chunks/DWTpI_9b.js";import{S as Et,i as wt}from"../chunks/00uyEj5u.js";import{g as It}from"../chunks/DRqhRD-H.js";import{a as kt}from"../chunks/Dqg9LriT.js";import{A as Dt}from"../chunks/CKvi8eoo.js";function ht(o){let u,l;return{c(){u=r("div"),l=et(o[2]),this.h()},l(m){u=a(m,"DIV",{class:!0});var n=f(u);l=$e(n,o[2]),n.forEach(i),this.h()},h(){t(u,"class","p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-600 text-sm")},m(m,n){be(m,u,n),e(u,l)},p(m,n){n&4&&Ct(l,m[2])},d(m){m&&i(u)}}}function Lt(o){let u;return{c(){u=et("Добавить клиента")},l(l){u=$e(l,"Добавить клиента")},m(l,m){be(l,u,m)},d(l){l&&i(u)}}}function Vt(o){let u;return{c(){u=et("Создание...")},l(l){u=$e(l,"Создание...")},m(l,m){be(l,u,m)},d(l){l&&i(u)}}}function Tt(o){let u,l,m,n='<a href="/clients" class="p-2 hover:bg-gray-100 rounded-lg transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <h1 class="text-2xl font-bold">Новый клиент</h1>',G,p,de,C,N,U,he="Имя *",me,g,fe,q,S,E="Фамилия *",M,y,Pe,H,K,Q,tt="Компания",Ne,w,Ue,W,X,lt="Должность",qe,I,Se,O,Y,at="Контакты",je,k,Z,$,rt="Telegram",ze,D,Me,ee,te,nt="Email",He,L,Oe,le,ae,st="Телефон",Fe,j,Re,V,re,ot="Юрист / Юридическое агентство",Je,ne,it="Опционально",Ge,F,se,oe,ut="Имя юриста / Название агентства",Ke,T,Qe,ie,ue,dt="Контакт",We,A,Xe,R,J,ct="Отмена",Ye,B,Ze,pt,h=o[2]&&ht(o);function mt(s,v){return s[1]?Vt:Lt}let ve=mt(o),z=ve(o);return{c(){u=c(),l=r("div"),m=r("div"),m.innerHTML=n,G=c(),p=r("form"),h&&h.c(),de=c(),C=r("div"),N=r("div"),U=r("label"),U.textContent=he,me=c(),g=r("input"),fe=c(),q=r("div"),S=r("label"),S.textContent=E,M=c(),y=r("input"),Pe=c(),H=r("div"),K=r("div"),Q=r("label"),Q.textContent=tt,Ne=c(),w=r("input"),Ue=c(),W=r("div"),X=r("label"),X.textContent=lt,qe=c(),I=r("input"),Se=c(),O=r("div"),Y=r("h2"),Y.textContent=at,je=c(),k=r("div"),Z=r("div"),$=r("label"),$.textContent=rt,ze=c(),D=r("input"),Me=c(),ee=r("div"),te=r("label"),te.textContent=nt,He=c(),L=r("input"),Oe=c(),le=r("div"),ae=r("label"),ae.textContent=st,Fe=c(),j=r("input"),Re=c(),V=r("div"),re=r("h2"),re.textContent=ot,Je=c(),ne=r("p"),ne.textContent=it,Ge=c(),F=r("div"),se=r("div"),oe=r("label"),oe.textContent=ut,Ke=c(),T=r("input"),Qe=c(),ie=r("div"),ue=r("label"),ue.textContent=dt,We=c(),A=r("input"),Xe=c(),R=r("div"),J=r("a"),J.textContent=ct,Ye=c(),B=r("button"),z.c(),this.h()},l(s){yt("svelte-7cv7si",document.head).forEach(i),u=d(s),l=a(s,"DIV",{class:!0});var _e=f(l);m=a(_e,"DIV",{class:!0,"data-svelte-h":!0}),_(m)!=="svelte-eba1gl"&&(m.innerHTML=n),G=d(_e),p=a(_e,"FORM",{class:!0});var x=f(p);h&&h.l(x),de=d(x),C=a(x,"DIV",{class:!0});var ge=f(C);N=a(ge,"DIV",{});var ye=f(N);U=a(ye,"LABEL",{class:!0,"data-svelte-h":!0}),_(U)!=="svelte-1w4180k"&&(U.textContent=he),me=d(ye),g=a(ye,"INPUT",{type:!0,placeholder:!0,class:!0}),ye.forEach(i),fe=d(ge),q=a(ge,"DIV",{});var xe=f(q);S=a(xe,"LABEL",{class:!0,"data-svelte-h":!0}),_(S)!=="svelte-o5o7xv"&&(S.textContent=E),M=d(xe),y=a(xe,"INPUT",{type:!0,placeholder:!0,class:!0}),xe.forEach(i),ge.forEach(i),Pe=d(x),H=a(x,"DIV",{class:!0});var Ce=f(H);K=a(Ce,"DIV",{});var Ee=f(K);Q=a(Ee,"LABEL",{class:!0,"data-svelte-h":!0}),_(Q)!=="svelte-1z02l6a"&&(Q.textContent=tt),Ne=d(Ee),w=a(Ee,"INPUT",{type:!0,placeholder:!0,class:!0}),Ee.forEach(i),Ue=d(Ce),W=a(Ce,"DIV",{});var we=f(W);X=a(we,"LABEL",{class:!0,"data-svelte-h":!0}),_(X)!=="svelte-1mccgzm"&&(X.textContent=lt),qe=d(we),I=a(we,"INPUT",{type:!0,placeholder:!0,class:!0}),we.forEach(i),Ce.forEach(i),Se=d(x),O=a(x,"DIV",{class:!0});var Ie=f(O);Y=a(Ie,"H2",{class:!0,"data-svelte-h":!0}),_(Y)!=="svelte-1vhqunn"&&(Y.textContent=at),je=d(Ie),k=a(Ie,"DIV",{class:!0});var ce=f(k);Z=a(ce,"DIV",{});var ke=f(Z);$=a(ke,"LABEL",{class:!0,"data-svelte-h":!0}),_($)!=="svelte-4m2usq"&&($.textContent=rt),ze=d(ke),D=a(ke,"INPUT",{type:!0,placeholder:!0,class:!0}),ke.forEach(i),Me=d(ce),ee=a(ce,"DIV",{});var De=f(ee);te=a(De,"LABEL",{class:!0,"data-svelte-h":!0}),_(te)!=="svelte-e1c99t"&&(te.textContent=nt),He=d(De),L=a(De,"INPUT",{type:!0,placeholder:!0,class:!0}),De.forEach(i),Oe=d(ce),le=a(ce,"DIV",{});var Le=f(le);ae=a(Le,"LABEL",{class:!0,"data-svelte-h":!0}),_(ae)!=="svelte-zincgb"&&(ae.textContent=st),Fe=d(Le),j=a(Le,"INPUT",{type:!0,placeholder:!0,class:!0}),Le.forEach(i),ce.forEach(i),Ie.forEach(i),Re=d(x),V=a(x,"DIV",{class:!0});var pe=f(V);re=a(pe,"H2",{class:!0,"data-svelte-h":!0}),_(re)!=="svelte-mc8uz1"&&(re.textContent=ot),Je=d(pe),ne=a(pe,"P",{class:!0,"data-svelte-h":!0}),_(ne)!=="svelte-1sli054"&&(ne.textContent=it),Ge=d(pe),F=a(pe,"DIV",{class:!0});var Ve=f(F);se=a(Ve,"DIV",{});var Te=f(se);oe=a(Te,"LABEL",{class:!0,"data-svelte-h":!0}),_(oe)!=="svelte-37vbjq"&&(oe.textContent=ut),Ke=d(Te),T=a(Te,"INPUT",{type:!0,placeholder:!0,class:!0}),Te.forEach(i),Qe=d(Ve),ie=a(Ve,"DIV",{});var Ae=f(ie);ue=a(Ae,"LABEL",{class:!0,"data-svelte-h":!0}),_(ue)!=="svelte-12962n6"&&(ue.textContent=dt),We=d(Ae),A=a(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),Ae.forEach(i),Ve.forEach(i),pe.forEach(i),Xe=d(x),R=a(x,"DIV",{class:!0});var Be=f(R);J=a(Be,"A",{href:!0,class:!0,"data-svelte-h":!0}),_(J)!=="svelte-1vs8ue"&&(J.textContent=ct),Ye=d(Be),B=a(Be,"BUTTON",{type:!0,class:!0});var ft=f(B);z.l(ft),ft.forEach(i),Be.forEach(i),x.forEach(i),_e.forEach(i),this.h()},h(){document.title="Новый клиент | CRM",t(m,"class","flex items-center gap-4 mb-8"),t(U,"class","block text-sm font-medium mb-2"),t(g,"type","text"),g.required=!0,t(g,"placeholder","Алексей"),t(g,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(S,"class","block text-sm font-medium mb-2"),t(y,"type","text"),y.required=!0,t(y,"placeholder","Иванов"),t(y,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(C,"class","grid grid-cols-2 gap-4"),t(Q,"class","block text-sm font-medium mb-2"),t(w,"type","text"),t(w,"placeholder","ООО Компания"),t(w,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(X,"class","block text-sm font-medium mb-2"),t(I,"type","text"),t(I,"placeholder","Генеральный директор"),t(I,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(H,"class","grid grid-cols-2 gap-4"),t(Y,"class","text-lg font-semibold mb-4"),t($,"class","block text-sm font-medium mb-2"),t(D,"type","text"),t(D,"placeholder","@username"),t(D,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(te,"class","block text-sm font-medium mb-2"),t(L,"type","email"),t(L,"placeholder","email@example.com"),t(L,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(ae,"class","block text-sm font-medium mb-2"),t(j,"type","tel"),t(j,"placeholder","+7 (999) 123-45-67"),t(j,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(k,"class","space-y-4"),t(O,"class","border-t border-gray-200 pt-6"),t(re,"class","text-lg font-semibold mb-4"),t(ne,"class","text-sm text-gray-500 mb-4"),t(oe,"class","block text-sm font-medium mb-2"),t(T,"type","text"),t(T,"placeholder","Юридическое бюро"),t(T,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(ue,"class","block text-sm font-medium mb-2"),t(A,"type","text"),t(A,"placeholder","Телефон или email"),t(A,"class","w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"),t(F,"class","grid grid-cols-2 gap-4"),t(V,"class","border-t border-gray-200 pt-6"),t(J,"href","/clients"),t(J,"class","flex-1 py-3 text-center border border-gray-300 hover:bg-gray-100 rounded-lg transition-colors"),t(B,"type","submit"),B.disabled=o[1],t(B,"class","flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg font-medium transition-colors text-white"),t(R,"class","flex gap-4 pt-4"),t(p,"class","space-y-6"),t(l,"class","p-8 max-w-2xl mx-auto")},m(s,v){be(s,u,v),be(s,l,v),e(l,m),e(l,G),e(l,p),h&&h.m(p,null),e(p,de),e(p,C),e(C,N),e(N,U),e(N,me),e(N,g),b(g,o[0].first_name),e(C,fe),e(C,q),e(q,S),e(q,M),e(q,y),b(y,o[0].last_name),e(p,Pe),e(p,H),e(H,K),e(K,Q),e(K,Ne),e(K,w),b(w,o[0].company),e(H,Ue),e(H,W),e(W,X),e(W,qe),e(W,I),b(I,o[0].position),e(p,Se),e(p,O),e(O,Y),e(O,je),e(O,k),e(k,Z),e(Z,$),e(Z,ze),e(Z,D),b(D,o[0].telegram_username),e(k,Me),e(k,ee),e(ee,te),e(ee,He),e(ee,L),b(L,o[0].email),e(k,Oe),e(k,le),e(le,ae),e(le,Fe),e(le,j),b(j,o[0].phone),e(p,Re),e(p,V),e(V,re),e(V,Je),e(V,ne),e(V,Ge),e(V,F),e(F,se),e(se,oe),e(se,Ke),e(se,T),b(T,o[0].lawyer_name),e(F,Qe),e(F,ie),e(ie,ue),e(ie,We),e(ie,A),b(A,o[0].lawyer_contact),e(p,Xe),e(p,R),e(R,J),e(R,Ye),e(R,B),z.m(B,null),Ze||(pt=[P(g,"input",o[4]),P(y,"input",o[5]),P(w,"input",o[6]),P(I,"input",o[7]),P(D,"input",o[8]),P(L,"input",o[9]),P(j,"input",o[10]),P(T,"input",o[11]),P(A,"input",o[12]),P(p,"submit",gt(o[3]))],Ze=!0)},p(s,[v]){s[2]?h?h.p(s,v):(h=ht(s),h.c(),h.m(p,de)):h&&(h.d(1),h=null),v&1&&g.value!==s[0].first_name&&b(g,s[0].first_name),v&1&&y.value!==s[0].last_name&&b(y,s[0].last_name),v&1&&w.value!==s[0].company&&b(w,s[0].company),v&1&&I.value!==s[0].position&&b(I,s[0].position),v&1&&D.value!==s[0].telegram_username&&b(D,s[0].telegram_username),v&1&&L.value!==s[0].email&&b(L,s[0].email),v&1&&b(j,s[0].phone),v&1&&T.value!==s[0].lawyer_name&&b(T,s[0].lawyer_name),v&1&&A.value!==s[0].lawyer_contact&&b(A,s[0].lawyer_contact),ve!==(ve=mt(s))&&(z.d(1),z=ve(s),z&&(z.c(),z.m(B,null))),v&2&&(B.disabled=s[1])},i:bt,o:bt,d(s){s&&(i(u),i(l)),h&&h.d(),z.d(),Ze=!1,_t(pt)}}}function At(o,u,l){let m;xt(o,kt,E=>l(13,m=E));let n={first_name:"",last_name:"",company:"",position:"",phone:"",email:"",telegram_username:"",lawyer_name:"",lawyer_contact:""},G=!1,p="";async function de(){l(2,p="");const E={first_name:n.first_name.trim(),last_name:n.last_name.trim(),company:n.company.trim()||null,position:n.position.trim()||null,phone:n.phone.trim()||null,email:n.email.trim()||null,telegram_username:n.telegram_username.trim().replace(/^@/,"")||null,lawyer_name:n.lawyer_name.trim()||null,lawyer_contact:n.lawyer_contact.trim()||null};if(!E.first_name||!E.last_name){l(2,p="Укажите имя и фамилию клиента");return}if(E.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){l(2,p="Некорректный формат email");return}l(1,G=!0);try{const M=await fetch(`${Dt}/api/clients/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.token}`},body:JSON.stringify(E)});if(!M.ok){const y=await M.json().catch(()=>({}));throw new Error(y.detail||"Failed to create client")}It("/clients")}catch(M){l(2,p=M.message||"Ошибка создания клиента")}l(1,G=!1)}function C(){n.first_name=this.value,l(0,n)}function N(){n.last_name=this.value,l(0,n)}function U(){n.company=this.value,l(0,n)}function he(){n.position=this.value,l(0,n)}function me(){n.telegram_username=this.value,l(0,n)}function g(){n.email=this.value,l(0,n)}function fe(){n.phone=this.value,l(0,n)}function q(){n.lawyer_name=this.value,l(0,n)}function S(){n.lawyer_contact=this.value,l(0,n)}return[n,G,p,de,C,N,U,he,me,g,fe,q,S]}class St extends Et{constructor(u){super(),wt(this,u,At,Tt,vt,{})}}export{St as component};
