import{s as ut,n as tt,d,r as ft,l as a,x as I,i as J,b as o,u as $,E as dt,c as u,e as _,m as R,g as h,h as f,j as g,a as se,f as ee,t as te}from"../chunks/DWTpI_9b.js";import{S as ct,i as pt}from"../chunks/00uyEj5u.js";import{g as mt}from"../chunks/DRqhRD-H.js";import{a as ht}from"../chunks/CKvi8eoo.js";function lt(s){let t,l;return{c(){t=f("div"),l=te(s[1]),this.h()},l(e){t=u(e,"DIV",{class:!0});var r=_(t);l=ee(r,s[1]),r.forEach(d),this.h()},h(){a(t,"class","p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm")},m(e,r){J(e,t,r),o(t,l)},p(e,r){r&2&&se(l,e[1])},d(e){e&&d(t)}}}function rt(s){let t,l=s[3].first_name+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].first_name+"")&&se(e,l)},d(r){r&&d(t)}}}function st(s){let t,l=s[3].last_name+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].last_name+"")&&se(e,l)},d(r){r&&d(t)}}}function at(s){let t,l=s[3].email+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].email+"")&&se(e,l)},d(r){r&&d(t)}}}function ot(s){let t,l=s[3].phone+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].phone+"")&&se(e,l)},d(r){r&&d(t)}}}function nt(s){let t,l=s[3].password+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].password+"")&&se(e,l)},d(r){r&&d(t)}}}function it(s){let t,l=s[3].confirmPassword+"",e;return{c(){t=f("p"),e=te(l),this.h()},l(r){t=u(r,"P",{class:!0});var i=_(t);e=ee(i,l),i.forEach(d),this.h()},h(){a(t,"class","mt-1 text-xs text-red-500")},m(r,i){J(r,t,i),o(t,e)},p(r,i){i&8&&l!==(l=r[3].confirmPassword+"")&&se(e,l)},d(r){r&&d(t)}}}function gt(s){let t;return{c(){t=te("Зарегистрироваться")},l(l){t=ee(l,"Зарегистрироваться")},m(l,e){J(l,t,e)},d(l){l&&d(t)}}}function bt(s){let t,l=`<span class="animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"></span>
							Регистрация...`;return{c(){t=f("span"),t.innerHTML=l,this.h()},l(e){t=u(e,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1z2oke"&&(t.innerHTML=l),this.h()},h(){a(t,"class","flex items-center justify-center gap-2")},m(e,r){J(e,t,r)},d(e){e&&d(t)}}}function _t(s){let t,l,e,r,i="Регистрация",c,m,ae,j,T,S,ge="Имя *",me,L,oe,b,he,H,K,Re="Фамилия *",ke,A,be,Ce,Ie,M,Q,Je="Email *",Le,D,_e,Te,De,le,W,Ge="Telegram",Ve,B,Ne,O,X,Ke="Телефон",Ae,U,ve,Be,Ue,q,Y,Qe="Пароль *",je,V,ye,Se,He,z,Z,We="Подтвердите пароль *",Me,N,we,Oe,qe,F,ze,re,Xe=`Уже есть аккаунт?
			<a href="/login" class="text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200">Войти</a>`,Fe,Ye,v=s[1]&&lt(s),y=s[3].first_name&&rt(s),w=s[3].last_name&&st(s),P=s[3].email&&at(s),x=s[3].phone&&ot(s),E=s[3].password&&nt(s),k=s[3].confirmPassword&&it(s);function Ze(n,p){return n[2]?bt:gt}let Pe=Ze(s),G=Pe(s);return{c(){t=f("div"),l=f("div"),e=f("div"),r=f("h1"),r.textContent=i,c=g(),m=f("form"),v&&v.c(),ae=g(),j=f("div"),T=f("div"),S=f("label"),S.textContent=ge,me=g(),L=f("input"),b=g(),y&&y.c(),he=g(),H=f("div"),K=f("label"),K.textContent=Re,ke=g(),A=f("input"),Ce=g(),w&&w.c(),Ie=g(),M=f("div"),Q=f("label"),Q.textContent=Je,Le=g(),D=f("input"),Te=g(),P&&P.c(),De=g(),le=f("div"),W=f("label"),W.textContent=Ge,Ve=g(),B=f("input"),Ne=g(),O=f("div"),X=f("label"),X.textContent=Ke,Ae=g(),U=f("input"),Be=g(),x&&x.c(),Ue=g(),q=f("div"),Y=f("label"),Y.textContent=Qe,je=g(),V=f("input"),Se=g(),E&&E.c(),He=g(),z=f("div"),Z=f("label"),Z.textContent=We,Me=g(),N=f("input"),Oe=g(),k&&k.c(),qe=g(),F=f("button"),G.c(),ze=g(),re=f("p"),re.innerHTML=Xe,this.h()},l(n){t=u(n,"DIV",{class:!0});var p=_(t);l=u(p,"DIV",{class:!0});var $e=_(l);e=u($e,"DIV",{class:!0});var ne=_(e);r=u(ne,"H1",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-1sgetb9"&&(r.textContent=i),c=h(ne),m=u(ne,"FORM",{class:!0});var C=_(m);v&&v.l(C),ae=h(C),j=u(C,"DIV",{class:!0});var xe=_(j);T=u(xe,"DIV",{});var ie=_(T);S=u(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(S)!=="svelte-djsez1"&&(S.textContent=ge),me=h(ie),L=u(ie,"INPUT",{id:!0,type:!0,class:!0}),b=h(ie),y&&y.l(ie),ie.forEach(d),he=h(xe),H=u(xe,"DIV",{});var ue=_(H);K=u(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(K)!=="svelte-1q43xoa"&&(K.textContent=Re),ke=h(ue),A=u(ue,"INPUT",{id:!0,type:!0,class:!0}),Ce=h(ue),w&&w.l(ue),ue.forEach(d),xe.forEach(d),Ie=h(C),M=u(C,"DIV",{});var fe=_(M);Q=u(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(Q)!=="svelte-oerdl8"&&(Q.textContent=Je),Le=h(fe),D=u(fe,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),Te=h(fe),P&&P.l(fe),fe.forEach(d),De=h(C),le=u(C,"DIV",{});var Ee=_(le);W=u(Ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(W)!=="svelte-ow5ne0"&&(W.textContent=Ge),Ve=h(Ee),B=u(Ee,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Ee.forEach(d),Ne=h(C),O=u(C,"DIV",{});var de=_(O);X=u(de,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(X)!=="svelte-1qjohks"&&(X.textContent=Ke),Ae=h(de),U=u(de,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Be=h(de),x&&x.l(de),de.forEach(d),Ue=h(C),q=u(C,"DIV",{});var ce=_(q);Y=u(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(Y)!=="svelte-6j99c7"&&(Y.textContent=Qe),je=h(ce),V=u(ce,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Se=h(ce),E&&E.l(ce),ce.forEach(d),He=h(C),z=u(C,"DIV",{});var pe=_(z);Z=u(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(Z)!=="svelte-1kl0vx4"&&(Z.textContent=We),Me=h(pe),N=u(pe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Oe=h(pe),k&&k.l(pe),pe.forEach(d),qe=h(C),F=u(C,"BUTTON",{type:!0,class:!0});var et=_(F);G.l(et),et.forEach(d),C.forEach(d),ze=h(ne),re=u(ne,"P",{class:!0,"data-svelte-h":!0}),R(re)!=="svelte-xbcxeh"&&(re.innerHTML=Xe),ne.forEach(d),$e.forEach(d),p.forEach(d),this.h()},h(){a(r,"class","text-2xl font-bold text-center mb-8 text-gray-800"),a(S,"for","first_name"),a(S,"class","block text-sm font-medium mb-2 text-gray-700"),a(L,"id","first_name"),a(L,"type","text"),a(L,"class",oe="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].first_name?"border-red-400":"border-gray-300")),a(K,"for","last_name"),a(K,"class","block text-sm font-medium mb-2 text-gray-700"),a(A,"id","last_name"),a(A,"type","text"),a(A,"class",be="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].last_name?"border-red-400":"border-gray-300")),a(j,"class","grid grid-cols-2 gap-4"),a(Q,"for","email"),a(Q,"class","block text-sm font-medium mb-2 text-gray-700"),a(D,"id","email"),a(D,"type","email"),a(D,"class",_e="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].email?"border-red-400":"border-gray-300")),a(D,"placeholder","your@email.com"),a(W,"for","telegram"),a(W,"class","block text-sm font-medium mb-2 text-gray-700"),a(B,"id","telegram"),a(B,"type","text"),a(B,"placeholder","@username"),a(B,"class","w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400"),a(X,"for","phone"),a(X,"class","block text-sm font-medium mb-2 text-gray-700"),a(U,"id","phone"),a(U,"type","tel"),a(U,"placeholder","+7 (999) 123-45-67"),a(U,"class",ve="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].phone?"border-red-400":"border-gray-300")),a(Y,"for","password"),a(Y,"class","block text-sm font-medium mb-2 text-gray-700"),a(V,"id","password"),a(V,"type","password"),a(V,"placeholder","Минимум 6 символов"),a(V,"class",ye="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].password?"border-red-400":"border-gray-300")),a(Z,"for","confirmPassword"),a(Z,"class","block text-sm font-medium mb-2 text-gray-700"),a(N,"id","confirmPassword"),a(N,"type","password"),a(N,"placeholder","Повторите пароль"),a(N,"class",we="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(s[3].confirmPassword?"border-red-400":"border-gray-300")),a(F,"type","submit"),F.disabled=s[2],a(F,"class","w-full py-3 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium transition-all duration-200 text-white shadow-lg hover:shadow-blue-500/30 mt-6"),a(m,"class","space-y-4"),a(re,"class","mt-6 text-center text-sm text-gray-500"),a(e,"class","bg-white rounded-xl p-8 shadow-xl border border-gray-200"),a(l,"class","w-full max-w-md"),a(t,"class","min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100")},m(n,p){J(n,t,p),o(t,l),o(l,e),o(e,r),o(e,c),o(e,m),v&&v.m(m,null),o(m,ae),o(m,j),o(j,T),o(T,S),o(T,me),o(T,L),I(L,s[0].first_name),o(T,b),y&&y.m(T,null),o(j,he),o(j,H),o(H,K),o(H,ke),o(H,A),I(A,s[0].last_name),o(H,Ce),w&&w.m(H,null),o(m,Ie),o(m,M),o(M,Q),o(M,Le),o(M,D),I(D,s[0].email),o(M,Te),P&&P.m(M,null),o(m,De),o(m,le),o(le,W),o(le,Ve),o(le,B),I(B,s[0].telegram_username),o(m,Ne),o(m,O),o(O,X),o(O,Ae),o(O,U),I(U,s[0].phone),o(O,Be),x&&x.m(O,null),o(m,Ue),o(m,q),o(q,Y),o(q,je),o(q,V),I(V,s[0].password),o(q,Se),E&&E.m(q,null),o(m,He),o(m,z),o(z,Z),o(z,Me),o(z,N),I(N,s[0].confirmPassword),o(z,Oe),k&&k.m(z,null),o(m,qe),o(m,F),G.m(F,null),o(e,ze),o(e,re),Fe||(Ye=[$(L,"input",s[5]),$(A,"input",s[6]),$(D,"input",s[7]),$(B,"input",s[8]),$(U,"input",s[9]),$(V,"input",s[10]),$(N,"input",s[11]),$(m,"submit",dt(s[4]))],Fe=!0)},p(n,[p]){n[1]?v?v.p(n,p):(v=lt(n),v.c(),v.m(m,ae)):v&&(v.d(1),v=null),p&8&&oe!==(oe="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].first_name?"border-red-400":"border-gray-300"))&&a(L,"class",oe),p&1&&L.value!==n[0].first_name&&I(L,n[0].first_name),n[3].first_name?y?y.p(n,p):(y=rt(n),y.c(),y.m(T,null)):y&&(y.d(1),y=null),p&8&&be!==(be="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].last_name?"border-red-400":"border-gray-300"))&&a(A,"class",be),p&1&&A.value!==n[0].last_name&&I(A,n[0].last_name),n[3].last_name?w?w.p(n,p):(w=st(n),w.c(),w.m(H,null)):w&&(w.d(1),w=null),p&8&&_e!==(_e="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].email?"border-red-400":"border-gray-300"))&&a(D,"class",_e),p&1&&D.value!==n[0].email&&I(D,n[0].email),n[3].email?P?P.p(n,p):(P=at(n),P.c(),P.m(M,null)):P&&(P.d(1),P=null),p&1&&B.value!==n[0].telegram_username&&I(B,n[0].telegram_username),p&8&&ve!==(ve="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].phone?"border-red-400":"border-gray-300"))&&a(U,"class",ve),p&1&&I(U,n[0].phone),n[3].phone?x?x.p(n,p):(x=ot(n),x.c(),x.m(O,null)):x&&(x.d(1),x=null),p&8&&ye!==(ye="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].password?"border-red-400":"border-gray-300"))&&a(V,"class",ye),p&1&&V.value!==n[0].password&&I(V,n[0].password),n[3].password?E?E.p(n,p):(E=nt(n),E.c(),E.m(q,null)):E&&(E.d(1),E=null),p&8&&we!==(we="w-full px-4 py-3 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-gray-900 placeholder-gray-400 "+(n[3].confirmPassword?"border-red-400":"border-gray-300"))&&a(N,"class",we),p&1&&N.value!==n[0].confirmPassword&&I(N,n[0].confirmPassword),n[3].confirmPassword?k?k.p(n,p):(k=it(n),k.c(),k.m(z,null)):k&&(k.d(1),k=null),Pe!==(Pe=Ze(n))&&(G.d(1),G=Pe(n),G&&(G.c(),G.m(F,null))),p&4&&(F.disabled=n[2])},i:tt,o:tt,d(n){n&&d(t),v&&v.d(),y&&y.d(),w&&w.d(),P&&P.d(),x&&x.d(),E&&E.d(),k&&k.d(),G.d(),Fe=!1,ft(Ye)}}}function vt(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}function yt(s){return s?/^[\d\s\-+()]+$/.test(s)&&s.replace(/\D/g,"").length>=10:!0}function wt(s,t,l){let e={email:"",password:"",confirmPassword:"",first_name:"",last_name:"",telegram_username:"",phone:""},r="",i=!1,c={first_name:"",last_name:"",email:"",password:"",confirmPassword:"",phone:""};function m(){l(3,c={first_name:"",last_name:"",email:"",password:"",confirmPassword:"",phone:""});let b=!0;return e.first_name.trim()?e.first_name.length<2&&(l(3,c.first_name="Минимум 2 символа",c),b=!1):(l(3,c.first_name="Имя обязательно",c),b=!1),e.last_name.trim()?e.last_name.length<2&&(l(3,c.last_name="Минимум 2 символа",c),b=!1):(l(3,c.last_name="Фамилия обязательна",c),b=!1),e.email.trim()?vt(e.email)||(l(3,c.email="Введите корректный email",c),b=!1):(l(3,c.email="Email обязателен",c),b=!1),e.password?e.password.length<6&&(l(3,c.password="Минимум 6 символов",c),b=!1):(l(3,c.password="Пароль обязателен",c),b=!1),e.confirmPassword?e.password!==e.confirmPassword&&(l(3,c.confirmPassword="Пароли не совпадают",c),b=!1):(l(3,c.confirmPassword="Подтвердите пароль",c),b=!1),e.phone&&!yt(e.phone)&&(l(3,c.phone="Введите корректный номер телефона",c),b=!1),b}async function ae(){if(m()){l(1,r=""),l(2,i=!0);try{const b=await ht("/api/auth/register",{method:"POST",body:JSON.stringify({email:e.email,password:e.password,first_name:e.first_name,last_name:e.last_name,telegram_username:e.telegram_username||null,phone:e.phone||null})});if(!b.ok){const he=await b.json();throw new Error(he.detail||"Registration failed")}mt("/login?registered=true")}catch(b){l(1,r=b.message||"Ошибка регистрации")}l(2,i=!1)}}function j(){e.first_name=this.value,l(0,e)}function T(){e.last_name=this.value,l(0,e)}function S(){e.email=this.value,l(0,e)}function ge(){e.telegram_username=this.value,l(0,e)}function me(){e.phone=this.value,l(0,e)}function L(){e.password=this.value,l(0,e)}function oe(){e.confirmPassword=this.value,l(0,e)}return[e,r,i,c,ae,j,T,S,ge,me,L,oe]}class Ct extends ct{constructor(t){super(),pt(this,t,wt,_t,ut,{})}}export{Ct as component};
