import{s as be,n as ae,d as m,p as Ce,A as b,i as O,b as _,u as re,l as u,c as w,e as k,m as ne,g as z,C as $,H as te,h as E,j as N,D as F,I as le,k as x,J as ue,f as W,t as q,a as K,o as Ie,K as De,L as ke,M as Be,N as we,O as Ee,P as Ve,v as fe}from"../chunks/DWTpI_9b.js";import{S as je,i as ye,a as Y,t as Z,c as He,b as Ae,d as ze,m as Ne,e as Se,f as Te,g as Oe}from"../chunks/00uyEj5u.js";import{g as ce}from"../chunks/DRqhRD-H.js";import{p as Me}from"../chunks/C-K37TD_.js";import{a as ee,w as Le}from"../chunks/Dqg9LriT.js";import{e as he}from"../chunks/CE5jpK0j.js";function de(s,e,l){const t=s.slice();return t[7]=e[l],t}function _e(s){let e,l="C";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-17l3jih"&&(e.textContent=l),this.h()},h(){u(e,"class","w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-bold text-white")},m(t,r){O(t,e,r)},d(t){t&&m(e)}}}function me(s){let e,l="Создать";return{c(){e=E("span"),e.textContent=l},l(t){e=w(t,"SPAN",{"data-svelte-h":!0}),ne(e)!=="svelte-118e5gc"&&(e.textContent=l)},m(t,r){O(t,e,r)},d(t){t&&m(e)}}}function ve(s){let e,l=s[7].label+"",t;return{c(){e=E("span"),t=q(l)},l(r){e=w(r,"SPAN",{});var i=k(e);t=W(i,l),i.forEach(m)},m(r,i){O(r,e,i),_(e,t)},p:ae,d(r){r&&m(e)}}}function pe(s){let e,l,t,r=s[5][s[7].icon]+"",i,d,f=!s[0]&&ve(s);return{c(){e=E("a"),l=F("svg"),t=new le(!0),i=N(),f&&f.c(),d=N(),this.h()},l(a){e=w(a,"A",{href:!0,class:!0});var n=k(e);l=$(n,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var o=k(l);t=te(o,!0),o.forEach(m),i=z(n),f&&f.l(n),d=z(n),n.forEach(m),this.h()},h(){t.a=null,u(l,"class","w-5 h-5 flex-shrink-0"),u(l,"fill","none"),u(l,"stroke","currentColor"),u(l,"viewBox","0 0 24 24"),u(e,"href",s[7].href),u(e,"class","sidebar-item"),b(e,"active",s[1].url.pathname.startsWith(s[7].href)),b(e,"justify-center",s[0]),b(e,"px-0",s[0])},m(a,n){O(a,e,n),_(e,l),t.m(r,l),_(e,i),f&&f.m(e,null),_(e,d)},p(a,n){a[0]?f&&(f.d(1),f=null):f?f.p(a,n):(f=ve(a),f.c(),f.m(e,d)),n&10&&b(e,"active",a[1].url.pathname.startsWith(a[7].href)),n&1&&b(e,"justify-center",a[0]),n&1&&b(e,"px-0",a[0])},d(a){a&&m(e),f&&f.d()}}}function ge(s){let e;function l(i,d){return i[0]?Ue:Pe}let t=l(s),r=t(s);return{c(){r.c(),e=ue()},l(i){r.l(i),e=ue()},m(i,d){r.m(i,d),O(i,e,d)},p(i,d){t===(t=l(i))&&r?r.p(i,d):(r.d(1),r=t(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&m(e),r.d(i)}}}function Pe(s){var M,B;let e,l,t=((M=s[2].user.first_name)==null?void 0:M[0])+"",r,i=((B=s[2].user.last_name)==null?void 0:B[0])+"",d,f,a,n,o=s[2].user.first_name+"",V,g,L=s[2].user.last_name+"",A,P,v,C=s[2].user.email+"",I,j,y,S,J,H=s[5].logout+"",D,U;return{c(){e=E("div"),l=E("div"),r=q(t),d=q(i),f=N(),a=E("div"),n=E("div"),V=q(o),g=N(),A=q(L),P=N(),v=E("div"),I=q(C),j=N(),y=E("button"),S=F("svg"),J=new le(!0),this.h()},l(c){e=w(c,"DIV",{class:!0});var h=k(e);l=w(h,"DIV",{class:!0});var p=k(l);r=W(p,t),d=W(p,i),p.forEach(m),f=z(h),a=w(h,"DIV",{class:!0});var T=k(a);n=w(T,"DIV",{class:!0});var R=k(n);V=W(R,o),g=z(R),A=W(R,L),R.forEach(m),P=z(T),v=w(T,"DIV",{class:!0});var G=k(v);I=W(G,C),G.forEach(m),T.forEach(m),j=z(h),y=w(h,"BUTTON",{class:!0,title:!0});var Q=k(y);S=$(Q,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var X=k(S);J=te(X,!0),X.forEach(m),Q.forEach(m),h.forEach(m),this.h()},h(){u(l,"class","w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-medium flex-shrink-0 text-white"),u(n,"class","font-medium truncate text-gray-800"),u(v,"class","text-xs text-gray-500 truncate"),u(a,"class","min-w-0 flex-1"),J.a=null,u(S,"class","w-5 h-5"),u(S,"fill","none"),u(S,"stroke","currentColor"),u(S,"viewBox","0 0 24 24"),u(y,"class","w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors"),u(y,"title","Выйти"),u(e,"class","flex items-center gap-3")},m(c,h){O(c,e,h),_(e,l),_(l,r),_(l,d),_(e,f),_(e,a),_(a,n),_(n,V),_(n,g),_(n,A),_(a,P),_(a,v),_(v,I),_(e,j),_(e,y),_(y,S),J.m(H,S),D||(U=re(y,"click",s[4]),D=!0)},p(c,h){var p,T;h&4&&t!==(t=((p=c[2].user.first_name)==null?void 0:p[0])+"")&&K(r,t),h&4&&i!==(i=((T=c[2].user.last_name)==null?void 0:T[0])+"")&&K(d,i),h&4&&o!==(o=c[2].user.first_name+"")&&K(V,o),h&4&&L!==(L=c[2].user.last_name+"")&&K(A,L),h&4&&C!==(C=c[2].user.email+"")&&K(I,C)},d(c){c&&m(e),D=!1,U()}}}function Ue(s){var A,P;let e,l,t=((A=s[2].user.first_name)==null?void 0:A[0])+"",r,i=((P=s[2].user.last_name)==null?void 0:P[0])+"",d,f,a,n,o,V=s[5].logout+"",g,L;return{c(){e=E("div"),l=E("div"),r=q(t),d=q(i),f=N(),a=E("button"),n=F("svg"),o=new le(!0),this.h()},l(v){e=w(v,"DIV",{class:!0});var C=k(e);l=w(C,"DIV",{class:!0});var I=k(l);r=W(I,t),d=W(I,i),I.forEach(m),C.forEach(m),f=z(v),a=w(v,"BUTTON",{class:!0,title:!0});var j=k(a);n=$(j,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var y=k(n);o=te(y,!0),y.forEach(m),j.forEach(m),this.h()},h(){u(l,"class","w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-medium flex-shrink-0 text-white"),u(e,"class","flex justify-center mb-3"),o.a=null,u(n,"class","w-5 h-5 flex-shrink-0"),u(n,"fill","none"),u(n,"stroke","currentColor"),u(n,"viewBox","0 0 24 24"),u(a,"class","sidebar-item justify-center px-0 text-gray-600 hover:text-gray-800 hover:bg-gray-100"),u(a,"title","Выйти")},m(v,C){O(v,e,C),_(e,l),_(l,r),_(l,d),O(v,f,C),O(v,a,C),_(a,n),o.m(V,n),g||(L=re(a,"click",s[4]),g=!0)},p(v,C){var I,j;C&4&&t!==(t=((I=v[2].user.first_name)==null?void 0:I[0])+"")&&K(r,t),C&4&&i!==(i=((j=v[2].user.last_name)==null?void 0:j[0])+"")&&K(d,i)},d(v){v&&(m(e),m(f),m(a)),g=!1,L()}}}function Re(s){let e,l,t,r="CRM",i,d,f,a,n,o,V=s[5].plus+"",g,L,A,P,v,C,I,j,y,S,J,H=s[0]&&_e(),D=!s[0]&&me(),U=he(s[3]),M=[];for(let c=0;c<U.length;c+=1)M[c]=pe(de(s,U,c));let B=s[2].user&&ge(s);return{c(){e=E("aside"),l=E("div"),t=E("h1"),t.textContent=r,i=N(),H&&H.c(),d=N(),f=E("div"),a=E("a"),n=F("svg"),o=new le(!0),g=N(),D&&D.c(),L=N(),A=E("nav");for(let c=0;c<M.length;c+=1)M[c].c();P=N(),v=E("div"),B&&B.c(),C=N(),I=E("button"),j=F("svg"),y=F("path"),this.h()},l(c){e=w(c,"ASIDE",{class:!0});var h=k(e);l=w(h,"DIV",{class:!0});var p=k(l);t=w(p,"H1",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-lkv8bz"&&(t.textContent=r),i=z(p),H&&H.l(p),p.forEach(m),d=z(h),f=w(h,"DIV",{class:!0});var T=k(f);a=w(T,"A",{href:!0,class:!0});var R=k(a);n=$(R,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var G=k(n);o=te(G,!0),G.forEach(m),g=z(R),D&&D.l(R),R.forEach(m),T.forEach(m),L=z(h),A=w(h,"NAV",{class:!0});var Q=k(A);for(let se=0;se<M.length;se+=1)M[se].l(Q);Q.forEach(m),P=z(h),v=w(h,"DIV",{class:!0});var X=k(v);B&&B.l(X),X.forEach(m),C=z(h),I=w(h,"BUTTON",{class:!0});var ie=k(I);j=$(ie,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var oe=k(j);y=$(oe,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(y).forEach(m),oe.forEach(m),ie.forEach(m),h.forEach(m),this.h()},h(){u(t,"class","text-xl font-bold text-gray-800"),b(t,"hidden",s[0]),u(l,"class","p-4 border-b border-gray-200"),o.a=null,u(n,"class","w-5 h-5 flex-shrink-0"),u(n,"fill","none"),u(n,"stroke","currentColor"),u(n,"viewBox","0 0 24 24"),u(a,"href","/tasks/new"),u(a,"class","flex items-center gap-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white"),b(a,"px-4",!s[0]),b(a,"py-3",!s[0]),b(a,"w-10",s[0]),b(a,"h-10",s[0]),b(a,"justify-center",s[0]),u(f,"class","p-4"),b(f,"px-3",s[0]),u(A,"class","flex-1 px-2"),u(v,"class","p-4 border-t border-gray-200"),b(v,"px-3",s[0]),u(y,"stroke-linecap","round"),u(y,"stroke-linejoin","round"),u(y,"stroke-width","2"),u(y,"d","M15 19l-7-7 7-7"),u(j,"class","w-4 h-4 transition-transform"),u(j,"fill","none"),u(j,"stroke","currentColor"),u(j,"viewBox","0 0 24 24"),b(j,"rotate-180",s[0]),u(I,"class","absolute top-4 -right-3 w-6 h-6 bg-white border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors text-gray-600 shadow-sm"),u(e,"class","sidebar"),b(e,"collapsed",s[0])},m(c,h){O(c,e,h),_(e,l),_(l,t),_(l,i),H&&H.m(l,null),_(e,d),_(e,f),_(f,a),_(a,n),o.m(V,n),_(a,g),D&&D.m(a,null),_(e,L),_(e,A);for(let p=0;p<M.length;p+=1)M[p]&&M[p].m(A,null);_(e,P),_(e,v),B&&B.m(v,null),_(e,C),_(e,I),_(I,j),_(j,y),S||(J=re(I,"click",s[6]),S=!0)},p(c,[h]){if(h&1&&b(t,"hidden",c[0]),c[0]?H||(H=_e(),H.c(),H.m(l,null)):H&&(H.d(1),H=null),c[0]?D&&(D.d(1),D=null):D||(D=me(),D.c(),D.m(a,null)),h&1&&b(a,"px-4",!c[0]),h&1&&b(a,"py-3",!c[0]),h&1&&b(a,"w-10",c[0]),h&1&&b(a,"h-10",c[0]),h&1&&b(a,"justify-center",c[0]),h&1&&b(f,"px-3",c[0]),h&43){U=he(c[3]);let p;for(p=0;p<U.length;p+=1){const T=de(c,U,p);M[p]?M[p].p(T,h):(M[p]=pe(T),M[p].c(),M[p].m(A,null))}for(;p<M.length;p+=1)M[p].d(1);M.length=U.length}c[2].user?B?B.p(c,h):(B=ge(c),B.c(),B.m(v,null)):B&&(B.d(1),B=null),h&1&&b(v,"px-3",c[0]),h&1&&b(j,"rotate-180",c[0]),h&1&&b(e,"collapsed",c[0])},i:ae,o:ae,d(c){c&&m(e),H&&H.d(),D&&D.d(),Ce(M,c),B&&B.d(),S=!1,J()}}}function We(s,e,l){let t,r;x(s,Me,o=>l(1,t=o)),x(s,ee,o=>l(2,r=o));let{collapsed:i=!1}=e;const d=[{href:"/tasks",icon:"kanban",label:"Задачи"},{href:"/clients",icon:"users",label:"Клиенты"},{href:"/media",icon:"newspaper",label:"СМИ"},{href:"/archive",icon:"archive",label:"Архив"},{href:"/analytics",icon:"chart",label:"Аналитика"}];function f(){ee.logout(),window.location.href="/login"}const a={kanban:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />',users:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />',newspaper:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />',archive:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />',chart:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />',plus:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />',settings:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />',logout:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />'},n=()=>l(0,i=!i);return s.$$set=o=>{"collapsed"in o&&l(0,i=o.collapsed)},[i,t,r,d,f,a,n]}class qe extends je{constructor(e){super(),ye(this,e,We,Re,be,{collapsed:0})}}function Je(s){let e;const l=s[6].default,t=ke(l,s,s[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,i){t&&t.m(r,i),e=!0},p(r,i){t&&t.p&&(!e||i&32)&&we(t,l,r,r[5],e?Ve(l,r[5],i,null):Ee(r[5]),null)},i(r){e||(Z(t,r),e=!0)},o(r){Y(t,r),e=!1},d(r){t&&t.d(r)}}}function Ke(s){let e,l,t,r,i;function d(o){s[7](o)}let f={};s[0]!==void 0&&(f.collapsed=s[0]),e=new qe({props:f}),De.push(()=>Ae(e,"collapsed",d));const a=s[6].default,n=ke(a,s,s[5],null);return{c(){Te(e.$$.fragment),t=N(),r=E("main"),n&&n.c(),this.h()},l(o){Se(e.$$.fragment,o),t=z(o),r=w(o,"MAIN",{class:!0,style:!0});var V=k(r);n&&n.l(V),V.forEach(m),this.h()},h(){u(r,"class","transition-all duration-300"),fe(r,"margin-left",s[0]?"4rem":"16rem")},m(o,V){Ne(e,o,V),O(o,t,V),O(o,r,V),n&&n.m(r,null),i=!0},p(o,V){const g={};!l&&V&1&&(l=!0,g.collapsed=o[0],Be(()=>l=!1)),e.$set(g),n&&n.p&&(!i||V&32)&&we(n,a,o,o[5],i?Ve(a,o[5],V,null):Ee(o[5]),null),(!i||V&1)&&fe(r,"margin-left",o[0]?"4rem":"16rem")},i(o){i||(Z(e.$$.fragment,o),Z(n,o),i=!0)},o(o){Y(e.$$.fragment,o),Y(n,o),i=!1},d(o){o&&(m(t),m(r)),ze(e,o),n&&n.d(o)}}}function $e(s){let e,l,t,r;const i=[Ke,Je],d=[];function f(a,n){return a[1]?0:1}return l=f(s),t=d[l]=i[l](s),{c(){e=E("div"),t.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=k(e);t.l(n),n.forEach(m),this.h()},h(){u(e,"class","min-h-screen bg-surface-100")},m(a,n){O(a,e,n),d[l].m(e,null),r=!0},p(a,[n]){let o=l;l=f(a),l===o?d[l].p(a,n):(Oe(),Y(d[o],1,1,()=>{d[o]=null}),He(),t=d[l],t?t.p(a,n):(t=d[l]=i[l](a),t.c()),Z(t,1),t.m(e,null))},i(a){r||(Z(t),r=!0)},o(a){Y(t),r=!1},d(a){a&&m(e),d[l].d()}}}function Fe(s,e,l){let t,r,i;x(s,Me,g=>l(3,r=g)),x(s,ee,g=>l(4,i=g));let{$$slots:d={},$$scope:f}=e,a=!1,n=!1;const o=["/login","/register"];Ie(async()=>{const g=await ee.checkAuth();l(2,n=!0),!g&&!o.includes(r.url.pathname)?ce("/login"):g&&Le.connect()});function V(g){a=g,l(0,a)}return s.$$set=g=>{"$$scope"in g&&l(5,f=g.$$scope)},s.$$.update=()=>{s.$$.dirty&28&&n&&!i.isAuthenticated&&!o.includes(r.url.pathname)&&ce("/login"),s.$$.dirty&24&&l(1,t=i.isAuthenticated&&!o.includes(r.url.pathname))},[a,t,n,r,i,f,d,V]}class et extends je{constructor(e){super(),ye(this,e,Fe,$e,be,{})}}export{et as component};
