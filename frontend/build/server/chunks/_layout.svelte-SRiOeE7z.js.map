{"version":3,"file":"_layout.svelte-SRiOeE7z.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_layout.svelte.js"],"sourcesContent":["import { c as create_ssr_component, a as subscribe, e as each, b as escape, d as add_attribute, v as validate_component } from \"../../chunks/ssr.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../chunks/exports.js\";\nimport \"../../chunks/utils.js\";\nimport \"@sveltejs/kit/internal/server\";\nimport \"../../chunks/state.svelte.js\";\nimport { p as page } from \"../../chunks/stores.js\";\nimport { a as auth } from \"../../chunks/websocket.js\";\nconst Sidebar = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $page, $$unsubscribe_page;\n  let $auth, $$unsubscribe_auth;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  $$unsubscribe_auth = subscribe(auth, (value) => $auth = value);\n  let { collapsed = false } = $$props;\n  const navItems = [\n    {\n      href: \"/tasks\",\n      icon: \"kanban\",\n      label: \"Задачи\"\n    },\n    {\n      href: \"/clients\",\n      icon: \"users\",\n      label: \"Клиенты\"\n    },\n    {\n      href: \"/media\",\n      icon: \"newspaper\",\n      label: \"СМИ\"\n    },\n    {\n      href: \"/archive\",\n      icon: \"archive\",\n      label: \"Архив\"\n    },\n    {\n      href: \"/analytics\",\n      icon: \"chart\",\n      label: \"Аналитика\"\n    }\n  ];\n  const icons = {\n    kanban: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2\" />`,\n    users: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />`,\n    newspaper: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />`,\n    archive: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" />`,\n    chart: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />`,\n    plus: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />`,\n    settings: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />`,\n    logout: `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />`\n  };\n  if ($$props.collapsed === void 0 && $$bindings.collapsed && collapsed !== void 0) $$bindings.collapsed(collapsed);\n  $$unsubscribe_page();\n  $$unsubscribe_auth();\n  return `<aside class=\"${[\"sidebar\", collapsed ? \"collapsed\" : \"\"].join(\" \").trim()}\"> <div class=\"p-4 border-b border-gray-200\"><h1 class=\"${[\"text-xl font-bold text-gray-800\", collapsed ? \"hidden\" : \"\"].join(\" \").trim()}\" data-svelte-h=\"svelte-lkv8bz\">CRM</h1> ${collapsed ? `<div class=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-bold text-white\" data-svelte-h=\"svelte-17l3jih\">C</div>` : ``}</div>  <div class=\"${[\"p-4\", collapsed ? \"px-3\" : \"\"].join(\" \").trim()}\"><a href=\"/tasks/new\" class=\"${[\n    \"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white\",\n    (!collapsed ? \"px-4\" : \"\") + \" \" + (!collapsed ? \"py-3\" : \"\") + \" \" + (collapsed ? \"w-10\" : \"\") + \" \" + (collapsed ? \"h-10\" : \"\") + \" \" + (collapsed ? \"justify-center\" : \"\")\n  ].join(\" \").trim()}\"><svg class=\"w-5 h-5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><!-- HTML_TAG_START -->${icons.plus}<!-- HTML_TAG_END --></svg> ${!collapsed ? `<span data-svelte-h=\"svelte-118e5gc\">Создать</span>` : ``}</a></div>  <nav class=\"flex-1 px-2\">${each(navItems, (item) => {\n    return `<a${add_attribute(\"href\", item.href, 0)} class=\"${[\n      \"sidebar-item\",\n      ($page.url.pathname.startsWith(item.href) ? \"active\" : \"\") + \" \" + (collapsed ? \"justify-center\" : \"\") + \" \" + (collapsed ? \"px-0\" : \"\")\n    ].join(\" \").trim()}\"><svg class=\"w-5 h-5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><!-- HTML_TAG_START -->${icons[item.icon]}<!-- HTML_TAG_END --></svg> ${!collapsed ? `<span>${escape(item.label)}</span>` : ``} </a>`;\n  })}</nav>  <div class=\"${[\"p-4 border-t border-gray-200\", collapsed ? \"px-3\" : \"\"].join(\" \").trim()}\">${$auth.user ? `${collapsed ? ` <div class=\"flex justify-center mb-3\"><div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-medium flex-shrink-0 text-white\">${escape($auth.user.first_name?.[0])}${escape($auth.user.last_name?.[0])}</div></div> <button class=\"sidebar-item justify-center px-0 text-gray-600 hover:text-gray-800 hover:bg-gray-100\" title=\"Выйти\"><svg class=\"w-5 h-5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><!-- HTML_TAG_START -->${icons.logout}<!-- HTML_TAG_END --></svg></button>` : ` <div class=\"flex items-center gap-3\"><div class=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-medium flex-shrink-0 text-white\">${escape($auth.user.first_name?.[0])}${escape($auth.user.last_name?.[0])}</div> <div class=\"min-w-0 flex-1\"><div class=\"font-medium truncate text-gray-800\">${escape($auth.user.first_name)} ${escape($auth.user.last_name)}</div> <div class=\"text-xs text-gray-500 truncate\">${escape($auth.user.email)}</div></div> <button class=\"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors\" title=\"Выйти\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><!-- HTML_TAG_START -->${icons.logout}<!-- HTML_TAG_END --></svg></button></div>`}` : ``}</div>  <button class=\"absolute top-4 -right-3 w-6 h-6 bg-white border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors text-gray-600 shadow-sm\"><svg class=\"${[\"w-4 h-4 transition-transform\", collapsed ? \"rotate-180\" : \"\"].join(\" \").trim()}\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"></path></svg></button></aside>`;\n});\nconst Layout = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let showSidebar;\n  let $page, $$unsubscribe_page;\n  let $auth, $$unsubscribe_auth;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  $$unsubscribe_auth = subscribe(auth, (value) => $auth = value);\n  let sidebarCollapsed = false;\n  const publicRoutes = [\"/login\", \"/register\"];\n  let $$settled;\n  let $$rendered;\n  let previous_head = $$result.head;\n  do {\n    $$settled = true;\n    $$result.head = previous_head;\n    showSidebar = $auth.isAuthenticated && !publicRoutes.includes($page.url.pathname);\n    $$rendered = `<div class=\"min-h-screen bg-surface-100\">${showSidebar ? `${validate_component(Sidebar, \"Sidebar\").$$render(\n      $$result,\n      { collapsed: sidebarCollapsed },\n      {\n        collapsed: ($$value) => {\n          sidebarCollapsed = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )} <main class=\"transition-all duration-300\" style=\"${\"margin-left: \" + escape(sidebarCollapsed ? \"4rem\" : \"16rem\", true)}\">${slots.default ? slots.default({}) : ``}</main>` : `${slots.default ? slots.default({}) : ``}`}</div>`;\n  } while (!$$settled);\n  $$unsubscribe_page();\n  $$unsubscribe_auth();\n  return $$rendered;\n});\nexport {\n  Layout as default\n};\n"],"names":[],"mappings":"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"}